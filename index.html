<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Kalkulator Gizi Pro</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(100%)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        pulseSoft: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.7' },
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'pulse-soft': 'pulseSoft 2s infinite',
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'card': '0 0 0 1px rgba(0,0,0,0.03), 0 2px 8px rgba(0,0,0,0.04)',
                        'floating': '0 20px 40px -10px rgba(0,0,0,0.1)',
                    }
                }
            }
        }
    </script>
    
    <style>
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        select { -webkit-appearance: none; -moz-appearance: none; appearance: none; }
        
        /* Smooth transitions */
        * { transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 200ms; }

        @media print {
            .no-print { display: none !important; }
            body { background: white; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .print-container { box-shadow: none; border: none; margin: 0; padding: 0; width: 100%; max-width: none; }
            .bg-emerald-50 { background-color: #ecfdf5 !important; }
            .text-emerald-800 { color: #065f46 !important; }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 selection:bg-emerald-100 selection:text-emerald-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );
        
        const Icons = {
            Calculator: (props) => <Icon {...props} path={<><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></>} />,
            FileText: (props) => <Icon {...props} path={<><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></>} />,
            ChevronDown: (props) => <Icon {...props} path={<path d="m6 9 6 6 6-6"/>} />,
            Info: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="16" y2="12"/><line x1="12" x2="12.01" y1="8" y2="8"/></>} />,
            User: (props) => <Icon {...props} path={<><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></>} />,
            Ruler: (props) => <Icon {...props} path={<><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"/><path d="m14.5 12.5 2-2"/><path d="m11.5 9.5 2-2"/><path d="m8.5 6.5 2-2"/><path d="m17.5 15.5 2-2"/></>} />,
            Weight: (props) => <Icon {...props} path={<><circle cx="12" cy="5" r="3"/><path d="M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z"/></>} />,
            Clock: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></>} />,
            Briefcase: (props) => <Icon {...props} path={<><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></>} />,
            Lock: (props) => <Icon {...props} path={<><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></>} />,
            Unlock: (props) => <Icon {...props} path={<><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></>} />,
            BookOpen: (props) => <Icon {...props} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>} />,
            Settings: (props) => <Icon {...props} path={<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>} />,
            Activity: (props) => <Icon {...props} path={<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>} />,
        };

        // --- PRESETS & CONFIG ---
        const PRESETS = {
            rendah_lemak: { gender: 'male', age: '21', weight: '98', height: '167' },
            dm: { gender: 'female', age: '55', weight: '65', height: '153' },
            rendah_purin: { gender: 'male', age: '54', weight: '70', height: '160' },
            gaky: { gender: 'female', age: '45', weight: '50', height: '153' }
        };

        const THEMES = {
            rendah_lemak: { 
                name: 'emerald', 
                bg: 'bg-emerald-50', border: 'border-emerald-200', text: 'text-emerald-800', 
                accent: 'text-emerald-600', ring: 'focus:ring-emerald-500', 
                decor: 'decoration-emerald-500', subBg: 'bg-emerald-100', subBorder: 'border-emerald-500',
                header: 'border-emerald-700', activeRow: 'bg-emerald-100 text-emerald-900 font-bold',
                card: 'bg-white shadow-soft shadow-emerald-900/5',
                button: 'bg-emerald-600 text-white hover:bg-emerald-700'
            },
            dm: { 
                name: 'amber', 
                bg: 'bg-amber-50', border: 'border-amber-200', text: 'text-amber-800', 
                accent: 'text-amber-600', ring: 'focus:ring-amber-500', 
                decor: 'decoration-amber-500', subBg: 'bg-amber-100', subBorder: 'border-amber-500',
                header: 'border-amber-600', activeRow: 'bg-amber-100 text-amber-900 font-bold',
                card: 'bg-white shadow-soft shadow-amber-900/5',
                button: 'bg-amber-600 text-white hover:bg-amber-700'
            },
            rendah_purin: { 
                name: 'rose', 
                bg: 'bg-rose-50', border: 'border-rose-200', text: 'text-rose-800', 
                accent: 'text-rose-600', ring: 'focus:ring-rose-500', 
                decor: 'decoration-rose-500', subBg: 'bg-rose-100', subBorder: 'border-rose-500',
                header: 'border-rose-600', activeRow: 'bg-rose-100 text-rose-900 font-bold',
                card: 'bg-white shadow-soft shadow-rose-900/5',
                button: 'bg-rose-600 text-white hover:bg-rose-700'
            },
            gaky: { 
                name: 'sky', 
                bg: 'bg-sky-50', border: 'border-sky-200', text: 'text-sky-800', 
                accent: 'text-sky-600', ring: 'focus:ring-sky-500', 
                decor: 'decoration-sky-500', subBg: 'bg-sky-100', subBorder: 'border-sky-500',
                header: 'border-sky-600', activeRow: 'bg-sky-100 text-sky-900 font-bold',
                card: 'bg-white shadow-soft shadow-sky-900/5',
                button: 'bg-sky-600 text-white hover:bg-sky-700'
            }
        };

        const ACTIVITY_GROUPS = [
            { label: 'Ringan', options: [
                { name: 'Membaca', val: 10 },
                { name: 'Menyetir', val: 10 },
                { name: 'Berjalan', val: 20 }
            ]},
            { label: 'Sedang', options: [
                { name: 'Menyapu', val: 20 },
                { name: 'Jalan Cepat', val: 30 },
                { name: 'Bersepeda', val: 30 }
            ]},
            { label: 'Berat', options: [
                { name: 'Aerobik', val: 40 },
                { name: 'Mendaki', val: 40 },
                { name: 'Jogging', val: 40 }
            ]}
        ];

        // --- SUB-COMPONENTS ---
        const MathLine = ({ label, formula, isResult, resultUnit, theme, smallText }) => (
            <div className={`grid grid-cols-[60px_20px_1fr] gap-y-1 font-mono ${smallText ? 'text-xs sm:text-sm' : 'text-sm sm:text-lg'} text-slate-700 leading-snug`}>
                <div className="font-semibold whitespace-nowrap opacity-80">{label || ''}</div>
                <div className="text-center opacity-60">=</div>
                <div>
                    {isResult ? (
                         <span className={`${theme.subBg} ${theme.text} px-2 py-0.5 rounded font-bold border ${theme.border} shadow-sm inline-block`}>
                            {formula} {resultUnit}
                        </span>
                    ) : (
                        <span>{formula}</span>
                    )}
                </div>
            </div>
        );

        const Section = ({ title, children, rightElement, theme }) => (
            <div className="mb-8">
                <div className={`flex justify-between items-baseline mb-4 border-b ${theme.border} pb-2`}>
                    <h3 className={`font-bold text-lg sm:text-xl text-slate-900 underline ${theme.decor} decoration-2 underline-offset-4`}>{title}</h3>
                    {rightElement}
                </div>
                <div className="pl-2 sm:pl-4">
                    {children}
                </div>
            </div>
        );

        const InputGroup = ({ label, suffix, value, onChange, theme, disabled, icon: IconComp }) => (
            <div className="relative">
                <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 ml-1">{label}</label>
                <div className="relative group">
                    <div className={`absolute left-3 top-2.5 transition-colors ${disabled ? 'text-slate-300' : 'text-slate-400'}`}>
                        {IconComp && <IconComp className="w-4 h-4" />}
                    </div>
                    <input 
                        type="number" 
                        value={value}
                        onChange={(e) => onChange(e.target.value)}
                        disabled={disabled}
                        className={`w-full pl-9 pr-9 py-2.5 rounded-xl border outline-none transition-all font-medium text-sm shadow-sm
                            ${disabled 
                                ? 'bg-slate-50/50 text-slate-400 border-slate-100 cursor-not-allowed' 
                                : `bg-white border-slate-200 focus:border-${theme.name}-500 focus:ring-2 focus:ring-${theme.name}-200 text-slate-800`
                            }`}
                        placeholder="0"
                    />
                    <span className={`absolute right-3 top-2.5 text-xs font-bold transition-colors ${disabled ? 'text-slate-300' : 'text-slate-400'}`}>{suffix}</span>
                </div>
            </div>
        );

        const CompactInput = ({ value, onChange, placeholder, suffix, disabled, theme }) => (
            <div className="relative w-full">
                <input 
                    type="number" 
                    value={value} 
                    onChange={(e) => onChange(e.target.value)}
                    disabled={disabled}
                    className={`w-full pl-2 pr-6 py-2 rounded-lg border text-xs font-semibold outline-none shadow-sm transition-all
                        ${disabled 
                            ? 'bg-slate-50 text-slate-400 border-slate-200 cursor-not-allowed' 
                            : `bg-white border-slate-200 focus:border-${theme.name}-500 focus:ring-1 focus:ring-${theme.name}-200`
                        }`}
                    placeholder={placeholder}
                />
                 <span className={`absolute right-2 top-2 text-[10px] pointer-events-none ${disabled ? 'text-slate-300' : 'text-slate-400'}`}>{suffix}</span>
            </div>
        );

        const TableRow = ({ label, value, isActive, theme }) => (
            <tr className={`border-b border-slate-100 last:border-0 text-sm transition-colors ${isActive ? theme.activeRow : 'text-slate-600 hover:bg-slate-50'}`}>
                <td className="py-2 px-3">{label}</td>
                <td className="py-2 px-3 text-right font-mono">{value}</td>
                <td className="py-2 px-3 text-center">
                    {isActive && <span className="inline-flex w-2 h-2 rounded-full bg-current animate-pulse"></span>}
                </td>
            </tr>
        );

        // --- MAIN APP ---
        const NutritionPaperApp = () => {
            const [input, setInput] = useState({
                age: '',
                gender: 'male',
                height: '',
                weight: '',
                bbiVersion: 'v1',
                dietType: 'rendah_lemak',
                activitySource: 'edukasi', // 'edukasi' | 'tambahan'
                activityName: 'Berjalan',
                activityPct: 20
            });
            const [result, setResult] = useState(null);
            const [showFloating, setShowFloating] = useState(false);
            const inputPanelRef = useRef(null);

            // UPDATED: Rendah Purin macros changed to Protein 10%, Fat 25% (Carbo remains 65% or implied balance)
            const DIET_TYPES = {
                rendah_lemak: { label: "Rendah Lemak", fullLabel: "Diet Rendah Lemak & Rendah Kalori", macros: { carbo: 65, protein: 15, fat: 20 }, distribution: [25, 10, 30, 10, 25] },
                dm: { label: "Diabetes (DM)", fullLabel: "Diet Diabetes Melitus", macros: { carbo: 50, protein: 30, fat: 20 }, distribution: [25, 10, 30, 10, 25] },
                rendah_purin: { label: "Rendah Purin", fullLabel: "Diet Rendah Purin", macros: { carbo: 65, protein: 10, fat: 25 }, distribution: [25, 10, 30, 10, 25] },
                gaky: { label: "Diet GAKY", fullLabel: "Diet GAKY", macros: { carbo: 65, protein: 15, fat: 20 }, distribution: [25, 10, 30, 10, 25] }
            };
            const MEAL_NAMES = ["Makan Pagi", "Selingan Pagi", "Makan Siang", "Selingan Sore", "Makan Malam"];
            const fmt = (num, decimals = 1) => {
                if (isNaN(num) || num === Infinity) return "0";
                return num.toLocaleString('id-ID', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
            };

            const theme = THEMES[input.dietType] || THEMES.rendah_lemak;
            const isLocked = input.activitySource === 'tambahan';

            // --- HANDLERS ---
            const handleActivityChange = (e) => {
                const valStr = e.target.value; 
                const [name, pct] = valStr.split('|');
                setInput({ ...input, activityName: name, activityPct: parseInt(pct) });
            };

            const handleSourceChange = (mode) => {
                if (mode === 'tambahan') {
                    const preset = PRESETS[input.dietType];
                    setInput({ ...input, activitySource: mode, ...preset });
                } else {
                    setInput({ ...input, activitySource: mode });
                }
            };

            const handleDietChange = (e) => {
                const newDiet = e.target.value;
                if (input.activitySource === 'tambahan') {
                    const preset = PRESETS[newDiet];
                    setInput({ ...input, dietType: newDiet, ...preset });
                } else {
                    setInput({ ...input, dietType: newDiet });
                }
            };

            // --- SCROLL DETECTION ---
            useEffect(() => {
                const observer = new IntersectionObserver(
                    ([entry]) => { setShowFloating(!entry.isIntersecting); },
                    { threshold: 0.1 } 
                );
                if (inputPanelRef.current) observer.observe(inputPanelRef.current);
                return () => { if (inputPanelRef.current) observer.unobserve(inputPanelRef.current); };
            }, [inputPanelRef]);

            useEffect(() => {
                if (!input.age || !input.height || !input.weight) { setResult(null); return; }

                const BB = parseFloat(input.weight);
                const TB = parseFloat(input.height);
                const U = parseInt(input.age);
                const TB_M = TB / 100;
                const diet = DIET_TYPES[input.dietType];

                // Calculations
                const imtVal = BB / (TB_M * TB_M);
                
                let bbiVal = 0, bbiSteps = [];
                if (input.bbiVersion === 'v1') {
                    bbiVal = 0.9 * (TB - 100);
                    bbiSteps = [{ label: 'Rumus', val: '90% x (TB - 100)' }, { label: 'Subs', val: `90% x (${TB} - 100)` }, { label: 'Hitung', val: `0,9 x ${TB - 100}` }];
                } else {
                    const base = TB - 100;
                    const reduction = 0.1 * base;
                    bbiVal = base - reduction;
                    bbiSteps = [{ label: 'Rumus', val: '(TB - 100) - 10%(TB - 100)' }, { label: 'Subs', val: `(${TB} - 100) - 10%(${TB} - 100)` }, { label: 'Hitung', val: `${base} - ${fmt(reduction)}` }];
                }

                const kebFactor = input.gender === 'male' ? 30 : 25;
                const kebVal = kebFactor * bbiVal;

                let agePct = 0;
                if (U >= 40 && U <= 59) agePct = 5;
                else if (U >= 60 && U <= 69) agePct = 10;
                else if (U >= 70) agePct = 20;
                const ageVal = (agePct / 100) * kebVal;

                const actPct = input.activitySource === 'tambahan' ? 20 : input.activityPct;
                const actVal = (actPct / 100) * kebVal;

                const ketPrelim = kebVal + actVal - ageVal;
                const DEFICIT = input.dietType === 'rendah_lemak' ? 500 : 0;
                const ketFinal = ketPrelim - DEFICIT; 
                
                const ketMin = ketFinal - (0.1 * ketFinal);
                const ketMax = ketFinal + (0.1 * ketFinal);

                const macros = [
                    { key: 'carbo', label: 'Karbohidrat', div: 4 },
                    { key: 'protein', label: 'Protein', div: 4 },
                    { key: 'fat', label: 'Lemak', div: 9 }
                ].map(m => {
                    const pct = diet.macros[m.key];
                    const calTotal = (pct / 100) * ketFinal; 
                    const gram = calTotal / m.div;
                    const maxGram = gram + (0.1 * gram);
                    const minGram = gram - (0.1 * gram);
                    return { ...m, pct, calTotal, gram, maxGram, minGram };
                });

                const mealPlan = diet.distribution.map((pct, idx) => ({
                    name: MEAL_NAMES[idx],
                    pct,
                    cal: (pct / 100) * ketFinal
                }));

                setResult({
                    im: { val: imtVal, bb: BB, tbm: TB_M },
                    bbi: { val: bbiVal, steps: bbiSteps },
                    keb: { val: kebVal, factor: kebFactor },
                    ket: { val: ketFinal, prelim: ketPrelim, actPct, actVal, agePct, ageVal, min: ketMin, max: ketMax, deficit: DEFICIT },
                    macros, mealPlan
                });
            }, [input]);

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 p-4 pb-32 lg:p-8 flex justify-center selection:bg-slate-200">
                    
                    {/* --- SMART FLOATING FOOTER (COMPACT) --- */}
                    {result && showFloating && (
                         <div className="fixed bottom-4 left-4 right-4 z-50 animate-slide-up no-print">
                            <div className="max-w-2xl mx-auto bg-white/95 backdrop-blur-md shadow-floating rounded-2xl border border-slate-200/60 p-3 ring-1 ring-slate-900/5">
                                <div className="flex flex-col gap-2">
                                    {/* Row 1: Bio Data */}
                                    <div className="flex gap-2 items-center relative">
                                        {isLocked && <div className="absolute inset-0 bg-white/50 z-10 rounded-xl cursor-not-allowed"></div>}
                                        <div className="flex bg-slate-100 p-1 rounded-xl shrink-0">
                                            <button disabled={isLocked} onClick={() => setInput({...input, gender: 'male'})} className={`w-8 h-8 flex items-center justify-center rounded-lg text-xs font-bold transition-all ${input.gender === 'male' ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}>L</button>
                                            <button disabled={isLocked} onClick={() => setInput({...input, gender: 'female'})} className={`w-8 h-8 flex items-center justify-center rounded-lg text-xs font-bold transition-all ${input.gender === 'female' ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}>P</button>
                                        </div>
                                        <CompactInput value={input.age} onChange={v => setInput({...input, age: v})} placeholder="Age" suffix="th" disabled={isLocked} theme={theme} />
                                        <CompactInput value={input.weight} onChange={v => setInput({...input, weight: v})} placeholder="BB" suffix="kg" disabled={isLocked} theme={theme} />
                                        <CompactInput value={input.height} onChange={v => setInput({...input, height: v})} placeholder="TB" suffix="cm" disabled={isLocked} theme={theme} />
                                    </div>
                                    
                                    {/* Row 2: Diet & Activity (With Toggle) */}
                                    <div className="flex gap-2 h-9">
                                        {/* Diet Select */}
                                        <div className="relative w-[45%]">
                                            <select 
                                                value={input.dietType}
                                                onChange={handleDietChange}
                                                className={`w-full h-full text-xs font-bold bg-slate-50 border-none rounded-xl pl-3 pr-6 cursor-pointer focus:ring-2 focus:ring-${theme.name}-200 text-slate-700 truncate hover:bg-slate-100 transition-colors`}
                                            >
                                                {Object.entries(DIET_TYPES).map(([k,v]) => <option key={k} value={k}>{v.label}</option>)}
                                            </select>
                                            <div className="absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"><Icons.ChevronDown className="w-3 h-3" /></div>
                                        </div>

                                        {/* Activity Control + Mode Toggle */}
                                        <div className="flex flex-1 gap-2">
                                            {/* Mode Toggle Button */}
                                            <button 
                                                onClick={() => handleSourceChange(input.activitySource === 'edukasi' ? 'tambahan' : 'edukasi')}
                                                className={`w-9 h-full flex items-center justify-center rounded-xl transition-all border shrink-0 ${input.activitySource === 'tambahan' ? `bg-slate-800 text-white border-slate-800` : 'bg-white text-slate-400 border-slate-200 hover:bg-slate-50 hover:text-slate-600'}`}
                                                title={input.activitySource === 'edukasi' ? "Mode: Hasil Edukasi" : "Mode: Tugas Tambahan"}
                                            >
                                                {input.activitySource === 'tambahan' ? <Icons.Lock className="w-4 h-4" /> : <Icons.BookOpen className="w-4 h-4" />}
                                            </button>

                                            {/* Activity Selector / Static Text */}
                                            <div className="relative flex-1 min-w-0">
                                                {input.activitySource === 'tambahan' ? (
                                                    <div className="w-full h-full text-xs font-bold bg-slate-50 border border-slate-100 rounded-xl px-3 text-slate-400 flex items-center select-none truncate">
                                                        Tugas (20%)
                                                    </div>
                                                ) : (
                                                    <>
                                                        <select 
                                                            value={`${input.activityName}|${input.activityPct}`}
                                                            onChange={handleActivityChange}
                                                            className={`w-full h-full text-xs font-bold bg-white border border-slate-200 rounded-xl pl-3 pr-5 cursor-pointer focus:ring-2 focus:ring-${theme.name}-200 text-slate-700 truncate hover:border-slate-300 transition-colors`}
                                                        >
                                                            {ACTIVITY_GROUPS.map((group, idx) => (
                                                                <optgroup key={idx} label={group.label}>
                                                                    {group.options.map((opt) => (
                                                                        <option key={opt.name} value={`${opt.name}|${opt.val}`}>{opt.name} ({opt.val}%)</option>
                                                                    ))}
                                                                </optgroup>
                                                            ))}
                                                        </select>
                                                        <div className="absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"><Icons.ChevronDown className="w-3 h-3" /></div>
                                                    </>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                         </div>
                    )}

                    <div className="w-full max-w-7xl grid grid-cols-1 lg:grid-cols-12 gap-8 print:block">
                        
                        {/* --- INPUT PANEL --- */}
                        <div className="lg:col-span-4 space-y-6 no-print" ref={inputPanelRef} id="input-panel">
                            
                            {/* Card 1: Skenario & Diet */}
                            <div className="bg-white rounded-3xl shadow-card border border-slate-100 overflow-hidden relative">
                                {/* Header */}
                                <div className={`px-6 py-5 border-b border-slate-100 flex items-center justify-between bg-slate-50/50`}>
                                    <div className="flex items-center gap-2">
                                        <div className={`p-2 rounded-lg ${theme.bg}`}>
                                            <Icons.Settings className={`w-4 h-4 ${theme.text}`} />
                                        </div>
                                        <h2 className="font-bold text-sm text-slate-700 tracking-wide">Konfigurasi</h2>
                                    </div>
                                </div>

                                <div className="p-6 space-y-6">
                                    {/* Mode Selector */}
                                    <div>
                                        <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Mode Perhitungan</label>
                                        <div className="bg-slate-100 p-1.5 rounded-2xl flex relative">
                                            {/* Animated Background */}
                                            <div className={`absolute top-1.5 bottom-1.5 rounded-xl bg-white shadow-sm transition-all duration-300 ease-in-out ${input.activitySource === 'edukasi' ? 'left-1.5 w-[calc(50%-6px)]' : 'left-[calc(50%+3px)] w-[calc(50%-6px)]'}`}></div>
                                            
                                            <button onClick={() => handleSourceChange('edukasi')} className={`flex-1 relative z-10 py-2.5 text-xs font-bold transition-colors ${input.activitySource === 'edukasi' ? 'text-slate-800' : 'text-slate-400 hover:text-slate-600'}`}>
                                                Hasil Edukasi
                                            </button>
                                            <button onClick={() => handleSourceChange('tambahan')} className={`flex-1 relative z-10 py-2.5 text-xs font-bold transition-colors ${input.activitySource === 'tambahan' ? 'text-slate-800' : 'text-slate-400 hover:text-slate-600'}`}>
                                                Tugas Tambahan
                                            </button>
                                        </div>
                                    </div>

                                    {/* Diet Selector */}
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Jenis Diet</label>
                                            <div className="relative">
                                                <select 
                                                    value={input.dietType}
                                                    onChange={handleDietChange}
                                                    className={`w-full appearance-none pl-4 pr-10 py-3.5 rounded-2xl border bg-white font-bold text-sm text-slate-700 outline-none transition-all shadow-sm ${theme.ring} border-slate-200 focus:border-${theme.name}-400 hover:border-slate-300`}
                                                >
                                                    {Object.entries(DIET_TYPES).map(([k,v]) => <option key={k} value={k}>{v.fullLabel}</option>)}
                                                </select>
                                                <div className="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none">
                                                    <Icons.ChevronDown className="w-4 h-4" />
                                                </div>
                                            </div>
                                        </div>

                                        {/* Activity Selector */}
                                        {input.activitySource === 'edukasi' ? (
                                            <div className="animate-in">
                                                <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Aktivitas Fisik</label>
                                                <div className="relative">
                                                    <select 
                                                        value={`${input.activityName}|${input.activityPct}`}
                                                        onChange={handleActivityChange}
                                                        className={`w-full appearance-none pl-4 pr-10 py-3.5 rounded-2xl border bg-white font-bold text-sm text-slate-700 outline-none transition-all shadow-sm ${theme.ring} border-slate-200 focus:border-${theme.name}-400 hover:border-slate-300`}
                                                    >
                                                        {ACTIVITY_GROUPS.map((group, idx) => (
                                                            <optgroup key={idx} label={group.label}>
                                                                {group.options.map((opt) => (
                                                                    <option key={opt.name} value={`${opt.name}|${opt.val}`}>{opt.name} ({opt.val}%)</option>
                                                                ))}
                                                            </optgroup>
                                                        ))}
                                                    </select>
                                                    <div className="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none">
                                                        <Icons.ChevronDown className="w-4 h-4" />
                                                    </div>
                                                </div>
                                            </div>
                                        ) : (
                                            <div className="animate-in p-4 rounded-2xl bg-slate-50 border border-dashed border-slate-200 flex items-start gap-3">
                                                <div className="p-2 bg-white rounded-lg shadow-sm text-slate-400">
                                                    <Icons.Lock className="w-4 h-4" />
                                                </div>
                                                <div>
                                                    <span className="block text-xs font-bold text-slate-700 mb-0.5">Mode Tugas Tambahan</span>
                                                    <p className="text-[10px] leading-relaxed text-slate-500">
                                                        Data fisik dan aktivitas (20%) diisi otomatis sesuai standar tugas diet ini.
                                                    </p>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* Card 2: Data Pasien */}
                            <div className={`bg-white rounded-3xl shadow-card border border-slate-100 overflow-hidden relative transition-all ${isLocked ? 'opacity-80' : ''}`}>
                                {isLocked && (
                                    <div className="absolute inset-0 bg-slate-50/60 z-20 backdrop-blur-[1px] flex items-center justify-center cursor-not-allowed group">
                                        <div className="bg-white/90 text-slate-500 text-xs py-2 px-4 rounded-xl font-bold shadow-soft border border-slate-100 flex items-center gap-2 transform group-hover:scale-105 transition-transform">
                                            <Icons.Lock className="w-3 h-3" /> Data Terkunci
                                        </div>
                                    </div>
                                )}
                                
                                <div className="px-6 py-5 border-b border-slate-100 flex items-center justify-between bg-slate-50/50">
                                    <h2 className="font-bold text-sm text-slate-700 tracking-wide">Data Pasien</h2>
                                    <Icons.User className="w-4 h-4 text-slate-400" />
                                </div>
                                
                                <div className="p-6 space-y-6">
                                    <div>
                                        <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Jenis Kelamin</label>
                                        <div className="flex gap-3">
                                            <button disabled={isLocked} onClick={() => setInput({...input, gender: 'male'})} className={`flex-1 py-3 rounded-xl text-sm font-bold border transition-all ${input.gender === 'male' ? 'bg-slate-800 text-white border-slate-800 shadow-lg shadow-slate-200' : 'bg-white text-slate-500 border-slate-200 hover:bg-slate-50'}`}>Laki-laki</button>
                                            <button disabled={isLocked} onClick={() => setInput({...input, gender: 'female'})} className={`flex-1 py-3 rounded-xl text-sm font-bold border transition-all ${input.gender === 'female' ? 'bg-slate-800 text-white border-slate-800 shadow-lg shadow-slate-200' : 'bg-white text-slate-500 border-slate-200 hover:bg-slate-50'}`}>Perempuan</button>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <InputGroup label="Usia" suffix="Thn" value={input.age} onChange={v => setInput({...input, age: v})} theme={theme} disabled={isLocked} icon={Icons.Clock} />
                                        <InputGroup label="Berat" suffix="kg" value={input.weight} onChange={v => setInput({...input, weight: v})} theme={theme} disabled={isLocked} icon={Icons.Weight} />
                                    </div>
                                    <InputGroup label="Tinggi Badan" suffix="cm" value={input.height} onChange={v => setInput({...input, height: v})} theme={theme} disabled={isLocked} icon={Icons.Ruler} />
                                </div>
                            </div>

                        </div>

                        {/* --- OUTPUT PANEL --- */}
                        <div className="lg:col-span-8">
                            <div className="bg-white min-h-[800px] shadow-lg border border-slate-200 relative rounded-xl mx-auto max-w-[800px] print-container overflow-hidden">
                                <div className={`border-b-4 ${theme.header} p-8 pb-6 transition-colors duration-500 bg-slate-50`}>
                                    <div className="flex justify-between items-end">
                                        <div>
                                            <h1 className="text-3xl font-serif font-bold text-slate-900 mb-2">HASIL ANALISA GIZI</h1>
                                            <div className="flex items-center gap-2">
                                                <span className={`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-white border border-slate-200 text-slate-500`}>
                                                    {input.activitySource === 'tambahan' ? 'Tugas Tambahan' : 'Hasil Edukasi'}
                                                </span>
                                                <p className={`font-serif ${theme.accent} italic text-sm`}>Laporan Klinis & Perhitungan Kebutuhan</p>
                                            </div>
                                        </div>
                                        <div className="p-3 bg-white rounded-xl shadow-sm border border-slate-100">
                                            <Icons.FileText className="w-8 h-8 text-slate-300" />
                                        </div>
                                    </div>
                                </div>

                                <div className="p-8 md:p-12 font-serif text-lg leading-relaxed text-slate-800">
                                    {!result ? (
                                        <div className="flex flex-col items-center justify-center py-20 text-slate-300">
                                            <div className="w-16 h-16 mb-4 rounded-full bg-slate-50 flex items-center justify-center animate-pulse-soft">
                                                <Icons.Calculator className="w-8 h-8 opacity-20" />
                                            </div>
                                            <p className="font-sans text-sm uppercase tracking-widest font-bold opacity-50">Menunggu Data Input</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-10 animate-in">
                                            
                                            {/* SUMMARY HEADER */}
                                            <div className="font-sans">
                                                <div className="flex flex-col gap-6">
                                                    <div className={`${theme.bg} p-5 rounded-xl border ${theme.border} flex flex-col sm:flex-row sm:items-center justify-between gap-4 transition-colors duration-500`}>
                                                        <div>
                                                            <span className={`text-[10px] font-bold ${theme.accent} uppercase tracking-widest block mb-1 opacity-80`}>Diet Prescribed</span>
                                                            <span className={`text-xl font-bold ${theme.text}`}>{DIET_TYPES[input.dietType].fullLabel}</span>
                                                        </div>
                                                        {input.activitySource === 'tambahan' && (
                                                            <div className="bg-white/60 px-3 py-1 rounded-lg text-xs font-bold text-slate-500 border border-white/50 shadow-sm flex items-center gap-1">
                                                                <Icons.Lock className="w-3 h-3" /> Preset Otomatis
                                                            </div>
                                                        )}
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                                        {[
                                                            { Icon: Icons.User, label: "Gender", val: input.gender === 'male' ? 'Laki-laki' : 'Perempuan' },
                                                            { Icon: Icons.Clock, label: "Usia", val: input.age + ' Tahun' },
                                                            { Icon: Icons.Ruler, label: "Tinggi", val: input.height + ' cm' },
                                                            { Icon: Icons.Weight, label: "Berat", val: input.weight + ' kg' }
                                                        ].map((item, i) => (
                                                            <div key={i} className="p-4 bg-white rounded-xl border border-slate-100 shadow-sm flex flex-col justify-center items-start hover:border-slate-200 transition-colors group">
                                                                <div className="flex items-center gap-2 mb-2 w-full border-b border-slate-50 pb-2">
                                                                    <item.Icon className="w-3 h-3 text-slate-300 group-hover:text-slate-400 transition-colors" />
                                                                    <span className="text-[10px] text-slate-400 font-bold uppercase tracking-wider">{item.label}</span>
                                                                </div>
                                                                <span className="font-bold text-slate-700 text-sm">{item.val}</span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            </div>

                                            {/* CALCULATIONS */}
                                            <Section title="1) Indeks Massa Tubuh (IMT)" theme={theme}>
                                                <MathLine label="IMT" formula="BB (kg) / TB (m)²" theme={theme} />
                                                <MathLine label="" formula={`${fmt(result.im.bb)} / (${fmt(result.im.tbm, 2)})²`} theme={theme} />
                                                <MathLine label="" formula={fmt(result.im.val, 1)} isResult resultUnit="kg/m²" theme={theme} />
                                            </Section>

                                            <Section title="2) Berat Badan Ideal (BBI)" theme={theme} rightElement={
                                                <select className={`text-xs font-sans border ${theme.border} rounded-lg px-2 py-1 bg-white cursor-pointer no-print focus:outline-none text-slate-500`} value={input.bbiVersion} onChange={e => setInput({...input, bbiVersion: e.target.value})}>
                                                    <option value="v1">Rumus 90% (Broca)</option>
                                                    <option value="v2">Rumus Modifikasi</option>
                                                </select>
                                            }>
                                                {result.bbi.steps.map((step, i) => (
                                                    <MathLine key={i} label={i===0 ? "BBI" : ""} formula={step.val} theme={theme} />
                                                ))}
                                                <MathLine label="" formula={fmt(result.bbi.val, 1)} isResult resultUnit="kg" theme={theme} />
                                            </Section>

                                            <Section title="3) Kebutuhan Energi Basal (KEB)" theme={theme}>
                                                <MathLine label="KEB" formula={`${result.keb.factor} kkal x BBI`} theme={theme} />
                                                <MathLine label="" formula={`${result.keb.factor} x ${fmt(result.bbi.val, 1)}`} theme={theme} />
                                                <MathLine label="" formula={fmt(result.keb.val, 1)} isResult resultUnit="kkal" theme={theme} />
                                            </Section>

                                            <Section title="4) Kebutuhan Energi Total (KET)" theme={theme}>
                                                <MathLine label="-KET" formula="KEB + % KEB aktivitas - % KEB faktor koreksi" theme={theme} smallText />
                                                <MathLine label="" formula={`${fmt(result.keb.val, 1)} + (${result.ket.actPct}% x ${fmt(result.keb.val, 1)}) - (${result.ket.agePct}% x ${fmt(result.keb.val, 1)})`} theme={theme} smallText />
                                                <MathLine label="" formula={`${fmt(result.keb.val, 1)} + ${fmt(result.ket.actVal, 1)} - ${fmt(result.ket.ageVal, 1)}`} theme={theme} smallText />
                                                <MathLine label="" formula={fmt(result.ket.prelim, 2)} isResult resultUnit="kkal" theme={theme} />

                                                {result.ket.deficit > 0 && (
                                                    <div className="mt-4 mb-2 animate-in p-3 bg-slate-50 rounded-lg border border-slate-100 border-dashed">
                                                        <MathLine label="-Total" formula="KET - 500 kkal (Defisit Diet Rendah Kalori)" theme={theme} smallText />
                                                        <MathLine label="" formula={`${fmt(result.ket.prelim, 2)} - 500`} theme={theme} smallText />
                                                        <MathLine label="" formula={fmt(result.ket.val, 2)} isResult resultUnit="kkal" theme={theme} />
                                                    </div>
                                                )}

                                                <div className="mt-4 text-sm pl-0">
                                                    <div className="text-slate-400 italic mb-2 text-xs uppercase font-bold tracking-wider">Batas Adekuat KET (+/- 10%)</div>
                                                    <div className={`font-mono text-slate-600 pl-4 border-l-2 ${theme.border} space-y-1`}>
                                                        <div className="flex justify-between w-64"><span>Max:</span> <span className={`font-bold ${theme.accent}`}>{fmt(result.ket.max, 2)} kkal</span></div>
                                                        <div className="flex justify-between w-64"><span>Min:</span> <span className={`font-bold ${theme.accent}`}>{fmt(result.ket.min, 2)} kkal</span></div>
                                                    </div>
                                                </div>
                                            </Section>

                                            <Section title="5) Makronutrien" theme={theme}>
                                                <div className="space-y-8">
                                                    {result.macros.map((m) => (
                                                        <div key={m.key}>
                                                            <div className="font-bold text-slate-800 mb-2 flex items-center gap-2">
                                                                <span className={`w-2 h-2 rounded-full ${theme.bg.replace('50', '400')}`}></span> 
                                                                {m.label}
                                                            </div>
                                                            <MathLine label="" formula={`${m.pct}% x KET : ${m.div}`} theme={theme} />
                                                            <MathLine label="" formula={`${m.pct}% x ${fmt(result.ket.val, 2)} : ${m.div}`} theme={theme} />
                                                            <MathLine label="" formula={fmt(m.gram, 1)} isResult resultUnit="gram" theme={theme} />
                                                            
                                                            <div className="mt-3 text-sm">
                                                                <div className="text-slate-400 italic mb-1 text-[10px] uppercase font-bold">Batas Adekuat {m.label} (+/- 10%)</div>
                                                                <div className={`font-mono text-slate-600 pl-4 border-l-2 ${theme.border} text-xs sm:text-sm`}>
                                                                    <div>Max: <span className="opacity-80">{fmt(m.gram, 1)} + 10% =</span> <span className={`font-bold ${theme.accent}`}>{fmt(m.maxGram, 1)} gr</span></div>
                                                                    <div>Min: <span className="opacity-80">{fmt(m.gram, 1)} - 10% =</span> <span className={`font-bold ${theme.accent}`}>{fmt(m.minGram, 1)} gr</span></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </Section>

                                            <Section title="6) Planning (Menu Sehari)" theme={theme}>
                                                <div className="grid gap-4">
                                                    {result.mealPlan.map((meal, idx) => (
                                                        <div key={idx} className="flex flex-col sm:flex-row sm:items-baseline gap-2 pb-3 border-b border-dashed border-slate-200 last:border-0 hover:bg-slate-50 px-2 rounded transition-colors">
                                                            <div className="w-40 font-bold text-slate-700 text-sm uppercase tracking-wide flex items-center gap-2">
                                                                <span className="text-slate-300 text-[10px]">0{idx+1}</span> {meal.name}
                                                            </div>
                                                            <div className="flex-1 font-mono text-slate-500 text-sm">
                                                                <span className="opacity-50">{meal.pct}% x {fmt(result.ket.val, 0)} =</span> <span className={`font-bold ${theme.accent} ml-2`}>{fmt(meal.cal, 1)} kkal</span>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </Section>

                                            {/* DYNAMIC TRANSPARENCY / FACTOR NOTES */}
                                            <div className={`${theme.bg} p-6 sm:p-8 border-t-2 ${theme.subBorder} rounded-b-xl -mx-8 -mb-12 mt-12`}>
                                                <h4 className={`font-bold text-xs uppercase tracking-widest ${theme.text} mb-6 flex items-center gap-2 opacity-80`}>
                                                    <Icons.Info className="w-4 h-4"/> Faktor Penentu (Transparansi Data)
                                                </h4>
                                                
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                    <div className="bg-white rounded-xl border border-slate-100 shadow-sm overflow-hidden">
                                                        <div className="bg-slate-50/50 px-4 py-3 border-b border-slate-100 text-[10px] font-bold text-slate-400 uppercase tracking-wider">Koreksi Usia</div>
                                                        <table className="w-full">
                                                            <tbody>
                                                                <TableRow label="< 40 Tahun" value="0%" isActive={parseInt(input.age) < 40} theme={theme} />
                                                                <TableRow label="40 - 59 Tahun" value="5%" isActive={parseInt(input.age) >= 40 && parseInt(input.age) <= 59} theme={theme} />
                                                                <TableRow label="60 - 69 Tahun" value="10%" isActive={parseInt(input.age) >= 60 && parseInt(input.age) <= 69} theme={theme} />
                                                                <TableRow label="≥ 70 Tahun" value="20%" isActive={parseInt(input.age) >= 70} theme={theme} />
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <div className="space-y-4">
                                                        <div className="bg-white rounded-xl border border-slate-100 shadow-sm overflow-hidden">
                                                            <div className="bg-slate-50/50 px-4 py-3 border-b border-slate-100 text-[10px] font-bold text-slate-400 uppercase tracking-wider">Konstanta Gender (KEB)</div>
                                                            <table className="w-full">
                                                                <tbody>
                                                                    <TableRow label="Laki-laki" value="30 kkal" isActive={input.gender === 'male'} theme={theme} />
                                                                    <TableRow label="Perempuan" value="25 kkal" isActive={input.gender === 'female'} theme={theme} />
                                                                </tbody>
                                                            </table>
                                                        </div>

                                                        <div className="grid grid-cols-2 gap-4">
                                                            <div className="bg-white rounded-xl border border-slate-100 p-4 shadow-sm">
                                                                <div className="text-[10px] font-bold text-slate-400 uppercase mb-1">Aktivitas</div>
                                                                <div className={`font-mono text-sm font-bold ${theme.text}`}>
                                                                    {input.activitySource === 'tambahan' ? '20% (Fix)' : `${input.activityPct}%`}
                                                                </div>
                                                            </div>
                                                            <div className="bg-white rounded-xl border border-slate-100 p-4 shadow-sm">
                                                                <div className="text-[10px] font-bold text-slate-400 uppercase mb-1">Defisit</div>
                                                                <div className={`font-mono text-sm font-bold ${theme.text}`}>
                                                                    {result.ket.deficit} kkal
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="mt-8 pt-6 border-t border-slate-200/50 flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-widest">
                                                    <span>Gizi Kalkulator Pro</span>
                                                    <span>{new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span>
                                                </div>
                                            </div>

                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<NutritionPaperApp />);
    </script>
</body>
</html>
